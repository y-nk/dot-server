(function(e){function t(t){for(var r,s,i=t[0],u=t[1],c=t[2],l=0,p=[];l<i.length;l++)s=i[l],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&p.push(a[s][0]),a[s]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);d&&d(t);while(p.length)p.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,i=1;i<n.length;i++){var u=n[i];0!==a[u]&&(r=!1)}r&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={app:0},o=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var d=u;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var r=n("85ec"),a=n.n(r);a.a},"091c":function(e,t,n){"use strict";var r=n("5369"),a=n.n(r);a.a},"0afd":function(e,t,n){},"0bf3":function(e,t,n){},1:function(e,t){},"148d":function(e,t,n){},"42c1":function(e,t,n){"use strict";var r=n("d69a"),a=n.n(r);a.a},5369:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=n("31bd"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[e.auth?n("router-view"):n("wall")],1)},s=[],i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"welcome"},[n("terminal",{attrs:{data:e.data}}),n("keyboard",{on:{type:e.type}})],1)},u=[],c=(n("96cf"),n("1da1")),d=(n("d3b7"),function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat("","/auth"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t})}).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),l=n("8055"),p=n.n(l),f=p.a.connect(""),m=function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){f.once("bound",(function(t){return e(t)})),f.emit("bind",{token:t})})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){f.once("invite",(function(t){return e(t)})),f.emit("invite",{token:t,username:n})})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v=function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){f.once("join",(function(t){return e(t)})),f.emit("join",{token:t,room:n})})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),b=function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",f.emit("leave",{token:t,room:n}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g=n("5530"),y=function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:f.emit("tx",Object(g["a"])(Object(g["a"])({},r),{},{room:n,token:t}));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"terminal"},[e._t("default"),e.data.length?e._l(e.data,(function(t,r){return n("div",{key:r,staticClass:"row"},e._l(t,(function(t,r){return n("span",{key:r,staticClass:"chunk",class:e.type(t.metadata),style:e.style(t.metadata),attrs:{"data-author":e.author(t.metadata)}},[e._v(e._s(t.data))])})),0)})):n("div",{staticClass:"row"})],2)},k=[],x=(n("caad"),{props:{data:{type:Array,default:function(){return[]}},user:{type:String,default:""},watch:{data:function(){this.$el&&(this.$el.scrollTop=999999)}}},methods:{author:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.author;return t===this.user?"myself":"system"===t?null:t},type:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.author;if("~rainbow~"===t)return"rainbow"},style:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.author;if(!["system","~rainbow~"].includes(t))return t===this.user?"--color: var(--local)":"--color: var(--foreign)"}}}),j=x,O=(n("a082"),n("2877")),$=Object(O["a"])(j,w,k,!1,null,"28f1b4c4",null),R=$.exports,_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("input",{staticClass:"keyboard",attrs:{autocomplete:"off",autocorrect:"off",spellcheck:"false",autofocus:""},on:{keydown:function(t){return t.stopPropagation(),e.onkeydown(t)},keyup:function(t){return t.stopPropagation(),e.onkeyup(t)},compositionstart:function(t){return t.stopPropagation(),e.oncompositionstart(t)},compositionupdate:function(t){return t.stopPropagation(),e.oncompositionupdate(t)},compositionend:function(t){return t.stopPropagation(),e.oncompositionend(t)},input:function(t){return t.stopPropagation(),e.oninput(t)}}})},C=[],T=(n("130f"),function(e){return"Backspace"===e.code||8===e.keyCode}),E=function(e){return"Tab"===e.code||9===e.keyCode},P=function(e){return"insertLineBreak"===e.inputType||"Enter"===e.code||13===e.keyCode},S={data:function(){return{isComposing:void 0,justEndedComposing:!1,composingBuffer:""}},mounted:function(){var e=this;this.$on("input",(function(t){var n="string"!==typeof t;e.$emit("type",{data:t,ime:n})})),this.compose(!1),this.timer=setInterval((function(){var t=document.activeElement.nodeName;"INPUT"!==t&&e.$el.focus()}),100)},beforeDestroy:function(){clearInterval(this.timer)},methods:{compose:function(e){this.isComposing=e,this.$el.value="",this.justEndedComposing=!1,this.composingBuffer=""},oninput:function(e){if(this.isComposing!==e.isComposing&&this.compose(e.isComposing),!(this.isComposing||T(e)||P(e))){var t="insertFromPaste"===e.inputType?e.target.value:e.data;this.$emit("input",t),this.$el.value=""}},onkeydown:function(e){this.justEndedComposing&&this.compose(!1),this.isComposing||(T(e)&&(e.preventDefault(),this.$emit("input","\b")),E(e)&&(e.preventDefault(),this.$emit("input","\t")))},onkeyup:function(e){var t=this;if(P(e)){if(e.preventDefault(),this.isComposing)return this.justEndedComposing||(this.$el.disabled=!0,setImmediate((function(){return t.$el.disabled=!1}))),void this.compose(!1);this.composingBuffer.length||this.$emit("input","\n")}},oncompositionstart:function(e){this.compose(!0)},oncompositionupdate:function(e){this.$emit("input",{original:this.composingBuffer,replacement:e.data}),this.composingBuffer=e.data},oncompositionend:function(e){this.justEndedComposing=!0}}},I=S,B=(n("8a94"),Object(O["a"])(I,_,C,!1,null,"7a9681a4",null)),D=B.exports,M={components:{Terminal:R,Keyboard:D},computed:{active:function(e){return e.$store.getters["sessions/active"]},data:function(e){var t,n;return null!==(t=null===(n=e.$store.getters["sessions/session"])||void 0===n?void 0:n.data)&&void 0!==t?t:[]}},mounted:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.play(e.$t("auth.welcome"));case 2:return t.next=5,e.prompt();case 5:return n=t.sent,t.next=8,e.$store.dispatch("api/login",n);case 8:if(r=t.sent,!r){t.next=14;break}return t.next=12,e.play(e.$t("auth.".concat(r)));case 12:t.next=20;break;case 14:return e.$store.dispatch("sessions/page",e.active),t.next=17,e.play(e.$t("auth.success",[n]));case 17:return t.next=19,e.play(e.$t("main.instructions",[n]));case 19:return t.abrupt("break",22);case 20:t.next=2;break;case 22:case"end":return t.stop()}}),t)})))()},methods:{type:function(e){this.$store.dispatch("sessions/type",e)},play:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$store.dispatch("sessions/message",{id:t.active,data:e});case 2:case"end":return n.stop()}}),n)})))()},prompt:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.play(e.$t("auth.prompt"));case 2:return t.next=4,e.$store.dispatch("sessions/prompt");case 4:return n=t.sent,t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)})))()}}},N=M,q=(n("091c"),Object(O["a"])(N,i,u,!1,null,"3e1e4388",null)),U=q.exports,z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main"},[n("transition",{attrs:{name:"enlarge",appear:""}},[n("Menu",{attrs:{sessions:e.sessions,active:e.active},on:{create:e.connect,focus:e.focus,destroy:e.destroy}})],1),n("terminal",{attrs:{user:e.myself,data:e.data}}),e.key?n("keyboard",{key:e.key,on:{type:e.type}}):e._e()],1)},A=[],F=(n("7db0"),n("d81d"),n("b0c0"),n("2532"),n("2f62")),J=(n("4fad"),n("3835")),K=n("a38e"),H=n("ade3"),X=n("15fd"),Y={namespaced:!0,state:{keyboard:Date.now(),username:void 0,token:void 0,rooms:{}},actions:{login:function(e,t){var n=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var a,o,s,i,u,c,l,p,h;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.state,o=e.commit,s=e.dispatch,i=e.getters,r.next=3,d(t);case 3:if(u=r.sent,c=u.success,l=u.token,p=u.reason,c){r.next=9;break}return r.abrupt("return",p);case 9:return r.next=11,m(l);case 11:if(h=r.sent,h){r.next=14;break}return r.abrupt("return",!1);case 14:o("login",{username:t,token:l}),f.on("summon",(function(e){var t=e.room,n=e.name;return s("join",{room:t,name:n})})),f.on("rx",(function(e){var t=e.room,n=Object(X["a"])(e,["room"]);a.rooms[t]&&s("sessions/inject",Object(g["a"])({id:a.rooms[t]},n),{root:!0})})),f.on("break",(function(){return o("break")})),n.subscribe((function(e){var t=e.type,n=e.payload;"sessions/destroy"===t&&(b(a.token,i.id(n)),o("destroy",i.id(n)))}));case 19:case"end":return r.stop()}}),r)})))()},invite:function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function n(){var r,a,o,s,i,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.state,a=e.commit,o=e.getters,s=t.user,i=t.session,o.auth){n.next=4;break}return n.abrupt("return");case 4:return n.next=6,h(r.token,s);case 6:return u=n.sent,u&&a("create",{room:u,session:i}),n.abrupt("return",!!u);case 9:case"end":return n.stop()}}),n)})))()},join:function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function n(){var r,a,o,s,i,u,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.state,a=e.commit,o=e.dispatch,s=t.room,i=t.name,r.rooms[s]){n.next=7;break}return n.next=5,o("sessions/create",{name:i},{root:!0});case 5:u=n.sent,a("create",{room:s,session:u});case 7:return n.next=9,v(r.token,s);case 9:if(c=n.sent,c){n.next=12;break}return n.abrupt("return",!1);case 12:return n.abrupt("return",!0);case 13:case"end":return n.stop()}}),n)})))()},send:function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function n(){var r,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=e.state,a=t.room,o=Object(X["a"])(t,["room"]),y(r.token,a,Object(g["a"])(Object(g["a"])({},o),{},{metadata:{author:r.username,color:"foreign"}}));case 3:case"end":return n.stop()}}),n)})))()},break:function(e){return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=e.commit,n("break",null),setImmediate((function(){return n("break",Date.now())}));case 3:case"end":return t.stop()}}),t)})))()}},mutations:{break:function(e,t){e.keyboard=t},login:function(e,t){var n=t.username,r=t.token;e.username=n,e.token=r},create:function(e,t){var n=t.room,r=t.session;e.rooms=Object(g["a"])(Object(g["a"])({},e.rooms),{},Object(H["a"])({},n,r))},destroy:function(e,t){var n=e.rooms,r=(n[t],Object(X["a"])(n,[t].map(K["a"])));e.rooms=r}},getters:{auth:function(e){return!!e.token},id:function(e){return function(t){var n;return null===(n=Object.entries(e.rooms).find((function(e){var n=Object(J["a"])(e,2),r=n[1];return r===t})))||void 0===n?void 0:n.shift()}}}},L=(n("07ac"),n("1b00")),W=function(e,t){var n=e.commit,r=t.name,a=Object(L["uuid"])();return n("create",{id:a,name:r}),a},G=function(e,t){var n=e.commit;return n("destroy",t)},Q=function(e,t){var n,r=e.state,a=e.commit,o=e.getters,s=e.rootState,i=t.data,u=t.ime,c=o.active;if("lock"===r.sessions[c].mode)return a("mode",{id:c,mode:"interrupt"});var d=null!==(n=s.api.username)&&void 0!==n?n:"~rainbow~",l={author:d},p=u?"replace":"concat";a(p,{id:c,data:i,metadata:l})},V=function(e,t){var n,r,a=e.state,o=e.commit,s=e.dispatch,i=e.getters,u=t.id,c=t.data,d=t.ime,l=t.metadata;if("lock"!==a.sessions[u].mode){var p=null!==(n=null===(r=i.trail)||void 0===r?void 0:r.metadata)&&void 0!==n?n:l;l.author!==p.author&&s("api/break",null,{root:!0});var f=d?"replace":"concat";o(f,{id:u,data:c,metadata:l})}},Z=(n("99af"),function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.state,r=t.commit,a=t.getters,o=a.active,s=function(){var e=n.sessions[o].data;return e[e.length-1]},r("mode",{id:o,mode:"prompt"}),r("concat",{id:o,data:""}),e.abrupt("return",new Promise((function(e){var t=xe.watch(s,(function(a){if(0===a.length){var s=n.sessions[o].data.concat().reverse().find((function(e){return e.length})),i=s[s.length-1].data;t(),e(i),r("mode",{id:o,mode:"unlock"})}}))})));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ee=(n("fb6a"),function(e){return new Promise((function(t){return setTimeout((function(){return t()}),e)}))}),te=function(e){return void 0===e||"\n"===e?750:75},ne=function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,o,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.state,a=t.commit,o=n.id,s=n.data,"lock"!==r.sessions[o].mode){e.next=4;break}return e.abrupt("return");case 4:a("mode",{id:o,mode:"lock"}),i=0;case 6:if(!(i<s.length)){e.next=15;break}return a("concat",{id:o,data:s[i],metadata:{author:"system"}}),e.next=10,ee(te(s[i+1]));case 10:if("interrupt"!==r.sessions[o].mode){e.next=12;break}return e.abrupt("break",15);case 12:i++,e.next=6;break;case 15:i<s.length-1&&a("concat",{id:o,data:s.slice(i+1),metadata:{author:"system"}}),a("mode",{id:o,mode:"concat"});case 17:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),re=function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=t.state,a=t.commit,o=r.sessions[n].data.length,s=0;case 3:if(!(s<o)){e.next=10;break}return a("scroll",n),e.next=7,ee(375);case 7:s++,e.next=3;break;case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ae=function(e,t){var n=e.commit,r=e.getters,a=r.active;n("mode",{id:a,mode:t})},oe={create:W,destroy:G,type:Q,inject:V,prompt:Z,message:ne,page:re,mode:ae},se=function(e,t){var n=t.id,r=t.name;if(n in e.sessions)throw new Error("session already exists");var a={id:n,name:r,heartbeat:Date.now(),mode:"concat",data:[]};e.sessions=Object(g["a"])(Object(g["a"])({},e.sessions),{},Object(H["a"])({},n,a))},ie=(n("b64b"),function(e,t){if(!(t in e.sessions))throw new Error("unknown session");var n=e.sessions,r=(n[t],Object(X["a"])(n,[t].map(K["a"])));e.sessions=r,e.active===t&&(e.active=Object.keys(e.sessions).shift())}),ue=n("2909"),ce=n("b85c"),de=function(e,t){var n=t.id,r=t.data,a=t.metadata,o=void 0===a?{}:a;if(!(n in e.sessions))throw new Error("unknown session");var s=e.sessions[n].data;if(r.length){var i,u=Object(ce["a"])(r);try{for(u.s();!(i=u.n()).done;){var c=i.value;s="\b"===c?pe(s,"prompt"===e.sessions[n].mode):"\n"===c?fe(s):le(s,c,o)}}catch(d){u.e(d)}finally{u.f()}}else s=le(s,r,o);e.sessions[n].data=s,e.sessions[n].heartbeat=Date.now()},le=function(e,t){var n,r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=null!==(n=e.pop())&&void 0!==n?n:[],s=o.pop(),i=a.author,u=s?[s]:[];return i===(null===s||void 0===s||null===(r=s.metadata)||void 0===r?void 0:r.author)?s.data+=t:u.push({data:t,metadata:a}),[].concat(Object(ue["a"])(e),[[].concat(Object(ue["a"])(o),u)])},pe=function(e,t){var n,r,a,o=null!==(n=e.pop())&&void 0!==n?n:[],s=o.pop();return s&&(s.data=null===(r=s.data)||void 0===r?void 0:r.slice(0,-1)),(null===s||void 0===s||null===(a=s.data)||void 0===a?void 0:a.length)||t?[].concat(Object(ue["a"])(e),[[].concat(Object(ue["a"])(o),[s])]):o.length?[].concat(Object(ue["a"])(e),[o]):Object(ue["a"])(e)},fe=function(e){return[].concat(Object(ue["a"])(e),[[]])},me=(n("baa5"),function(e,t){var n,r,a=t.id,o=t.data,s=t.metadata,i=void 0===s?{}:s;if(!(a in e.sessions))throw new Error("unknown session");var u=o.original,c=o.replacement,d=e.sessions[a].data,l=null!==(n=d.pop())&&void 0!==n?n:[],p=l.pop(),f=i.author,m=p?[p]:[];p&&f===(null===p||void 0===p||null===(r=p.metadata)||void 0===r?void 0:r.author)||m.push({data:"",metadata:i});var h=m[m.length-1];if(u.length){var v=h.data.lastIndexOf(u);h.data="".concat(h.data.slice(0,v)).concat(c)}else h.data+=c;e.sessions[a].data=[].concat(Object(ue["a"])(d),[[].concat(Object(ue["a"])(l),m)])}),he=function(e,t){if(!(t in e.sessions))throw new Error("unknown session");e.sessions[t].data=[]},ve=n("4f96"),be=function(e,t){if(!(t in e.sessions))throw new Error("unknown session");var n=Object(ve["a"])(e.sessions[t].data),r=(n[0],n.slice(1));e.sessions[t].data=r},ge=function(e,t){var n=t.id,r=t.mode;if(!(n in e.sessions))throw new Error("unknown session");e.sessions[n].mode=r},ye={create:se,destroy:ie,concat:de,replace:me,empty:he,scroll:be,mode:ge},we={namespaced:!0,state:{sessions:{},active:void 0},actions:oe,mutations:ye,getters:{sessions:function(e){return Object.values(e.sessions)},active:function(e,t,n){var r,a=t.sessions,o=n.route;return null===(r=a.find((function(e){var t=e.name;return t===(o.params.session||"default")})))||void 0===r?void 0:r.id},session:function(e,t){var n,r=t.active;return null!==(n=e.sessions[r])&&void 0!==n?n:void 0},trail:function(e,t){var n,r,a=t.session,o=a.data,s=void 0===o?[]:o,i=null!==(n=s[s.length-1])&&void 0!==n?n:[],u=null!==(r=i[i.length-1])&&void 0!==r?r:{};return u},id:function(e){return function(t){var n;return null===(n=Object.values(e.sessions).find((function(e){return e.name===t})))||void 0===n?void 0:n.id}}}};r["a"].use(F["a"]);var ke=new F["a"].Store({modules:{api:Y,sessions:we}}),xe=ke,je=function(e){return{beforeRouteEnter:e,beforeRouteUpdate:e}},Oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{staticClass:"menu"},[e._l(e.sessions,(function(t,r){return n("session",{key:r,attrs:{id:t.id,name:t.name,update:t.heartbeat,active:e.active===t.id,deletable:0!==r},on:{focus:function(t){return e.$emit("focus",t)},destroy:function(t){return e.$emit("destroy",t)}}})})),n("create",{on:{submit:function(t){return e.$emit("create",t)}}})],2)},$e=[],Re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"session",class:{active:e.active,blink:e.blink}},[n("button",{on:{click:function(t){return e.$emit("focus",e.id)}}},[e._v(e._s(e.name))]),e.deletable?n("button",{on:{click:function(t){return e.$emit("destroy",e.id)}}},[e._v("[x]")]):e._e()])},_e=[],Ce=(n("a9e3"),n("04d3"),{props:{id:{type:String,required:!0},name:{type:String,required:!0},update:{type:Number,default:0},active:{type:Boolean,default:!1},deletable:{type:Boolean,default:!1}},data:function(){return{blink:!1}},watch:{update:function(){var e=this;clearTimeout(this.timer),this.active||(this.blink=!0,this.timer=setTimeout((function(){return e.blink=!1}),25))}}}),Te=Ce,Ee=(n("b9c0"),Object(O["a"])(Te,Re,_e,!1,null,"b67f2aca",null)),Pe=Ee.exports,Se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"create"},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.value,expression:"value",modifiers:{trim:!0}}],ref:"input",attrs:{type:"text"},domProps:{value:e.value},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.dispatch(t)},input:function(t){t.target.composing||(e.value=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),n("button",{attrs:{href:"#",disabled:e.disabled},on:{click:e.dispatch}},[e._v("[+]")])])},Ie=[],Be=/^[a-z0-9][a-z0-9_.-]{2,62}[a-z0-9]$/i,De={watch:{value:function(e){this.disabled=!Be.test(e)}},data:function(){return{value:"",disabled:!0}},methods:{dispatch:function(e){var t=this;e.preventDefault(),e.stopImmediatePropagation(),this.disabled||(this.$emit("submit",this.value),this.value="",setTimeout((function(){return t.$refs.input.blur()}),50))}}},Me=De,Ne=(n("42c1"),Object(O["a"])(Me,Se,Ie,!1,null,"37b0892d",null)),qe=Ne.exports,Ue={components:{Session:Pe,Create:qe},props:{sessions:{type:Array,required:!0},active:{type:String,default:void 0}}},ze=Ue,Ae=(n("9e70"),Object(O["a"])(ze,Oe,$e,!1,null,"8cc3caac",null)),Fe=Ae.exports,Je={mixins:[je((function(e,t,n){var r,a=xe.getters["sessions/sessions"].map((function(e){var t=e.name;return t})),o=null!==(r=e.params.session)&&void 0!==r?r:"";if(o.length&&!a.includes(o))return n("/");n()}))],components:{Menu:Fe,Terminal:R,Keyboard:D},computed:{key:function(e){return e.$store.state.api.keyboard},myself:function(e){return e.$store.state.api.username},sessions:function(e){return e.$store.getters["sessions/sessions"]},default:function(e){return e.$store.getters["sessions/id"]("default")},active:function(e){return e.$store.getters["sessions/active"]},attached:function(e){return e.$store.getters["api/id"](e.active)},session:function(e){return e.$store.getters["sessions/session"]},data:function(e){var t,n;return null!==(t=null===(n=e.session)||void 0===n?void 0:n.data)&&void 0!==t?t:[]},lock:function(e){var t,n;return null===(t=null===(n=e.session)||void 0===n?void 0:n.lock)||void 0===t||t}},methods:{type:function(e){this.$store.dispatch("sessions/type",e),this.attached&&this.$store.dispatch("api/send",Object(g["a"])({room:this.attached},e))},connect:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$store.dispatch("sessions/create",{name:e});case 2:return r=n.sent,n.next=5,t.$store.dispatch("api/invite",{user:e,session:r});case 5:a=n.sent,a?t.focus(r):(t.destroy(r),t.focus(t.default),t.$store.dispatch("sessions/message",{id:t.default,data:t.$t("main.notfound",[e])}));case 7:case"end":return n.stop()}}),n)})))()},focus:function(e){var t=this.sessions.find((function(t){return t.id===e}));if(t){var n="default"!==t.name?t.name:"";this.$router.push("/".concat(n))}},destroy:function(e){this.$store.commit("sessions/destroy",e)}}},Ke=Je,He=(n("b162"),Object(O["a"])(Ke,z,A,!1,null,"2e624a1f",null)),Xe=He.exports,Ye={components:{Wall:U,Main:Xe,Keyboard:D},computed:{auth:function(e){return e.$store.getters["api/auth"]}}},Le=Ye,We=(n("034f"),Object(O["a"])(Le,o,s,!1,null,null,null)),Ge=We.exports,Qe=n("8c4f");r["a"].use(Qe["a"]);var Ve=new Qe["a"]({routes:[{path:"/:session?",component:Xe}]}),Ze=n("a925"),et="Here's a little experiment about communication.\n\nTo connect with someone, tap on the sidebar and input the name of your correspondant (press enter or push the [+] button to confirm)\n\nIf the person you're trying to reach is online, a chat session will open for both. Then, you can start typing right away. Otherwise, a simple \"user not found\" message will be prompted here.\n\nHave fun :)\n\n==========\n\nThoughts behind this experiment:\n\nI created this in order to reflect on the UX patterns involved into text-based communications.\n\nIn a real (voiced) conversation, instant is the essence. For most of the time, a multiple person interaction would involve mostly listening to someone's expression and later on reacting to it. For such a paradigm, listening is a primary function, and reacting is a response to it. Of course, some may prepare sentences in advanced, but then they wouldn't be fully listening and that would probably be seen.\n\nIn text-based conversations, and because we use a mediator in between people, we relay on that mediator's functionalities to communicate. The interactions aren't based on our primal instincts but rather on what the tool let us do.\n\nIt appeared to me that UX in that matter is quite consistent, but somehow differs from \"the normal course of actions\" since most are treating text-based conversation as something asynchronous rather than just a text translation of a phone call.\n\nNotably, those points came to mind:\n\n- The ability to type, redact and correct a message before sending.\n\nIt's sure something that doesn't occur organically in a conversation. Naturally, you can think ahead and take a pause to organize your thoughts, but in that case it translates into a real-timed pause within a conversation which induces its own context: \"why does my correspondant need a pause?, what are they thinking now?\" ; not to mention the casual awkwardness of silence which can come with it.\n\nIn a text-based world, if this real time pause may exist, but does not translate into the same intent, rather \"did my correspondant read my message?\" ; for most of the time it doesn't exist anyway, and that because of the asynchronicity of it.\n\nYou may argue that SMS were first to induce this, and you'd be right. But other factors are increasing the differences as well. At most, SMS were a technical constraint at the time, not an architectural design choice.\n\n- The layout of most of messages app doesn't reflect a conversation\n\nBecause text-based conversations are treated as asynchronous, we're most likely to not pay attention to it in the same way we treat a fragile, time-dependent conversation.\n\nThe typical messaging app will always display the reading space and the writing space at the same time. Along with the asynchronous nature, this induces the choice into a user to care more about its own writing than listening to the conversation before reacting. It is natural to say, user still have the choice to listen first, but I personally believe that this contributed to shift our relationship with relationships and conversations in modern society.\n\nTo battle this idea, this text-based chat application is entirely synchronous.\n\n- You can't reach people who aren't online\n- There's no reading/writing space dichotomy, only one space for conversation.\n- There's no buffer in typing, so that typing simultaneously will result in giberrish, as much as in real life and that users need to find a rythm to listen to each other.\n\nBy doing so, I hope to bring awareness that other people need to be listened to, and cared for, rather than focusing on ourselves and what we want to express.\n\nOf course, it's always a balance, but as for now it seems it's already leaning towards a side promoting the self rather than openness to others.\n",tt={auth:{welcome:"\nplease identify yourself before going any further.\nyour handle can be from 4 to 64 alpha-numerical characters.\n",prompt:"\nlogin: ",undefined:"\nthere was an error during login phase. please try again.\n",minlength:"\nthis username is too short. a minimum of 4 characters is required.\n",maxlength:"\nthis username is too long. a maximum of 64 characters can be entered.\n",format:"\nthis username has invalid characters. make sure to use only alpha-numerical characters.\n",exists:"\nthis username is currently being used. please choose an other one.\n",success:"\nwelcome {0}!\n\n"},main:{instructions:et,notfound:"\nuser {0} was not found\n"}},nt={};r["a"].use(Ze["a"]);var rt=new Ze["a"]({locale:"en",messages:{en:tt,jp:nt}});r["a"].config.productionTip=!1,Object(a["sync"])(xe,Ve),xe.dispatch("sessions/create",{name:"default"}),new r["a"]({store:xe,router:Ve,i18n:rt,render:function(e){return e(Ge)}}).$mount("#app")},5900:function(e,t,n){},"85ec":function(e,t,n){},"8a94":function(e,t,n){"use strict";var r=n("5900"),a=n.n(r);a.a},"9e70":function(e,t,n){"use strict";var r=n("be12"),a=n.n(r);a.a},a082:function(e,t,n){"use strict";var r=n("148d"),a=n.n(r);a.a},b162:function(e,t,n){"use strict";var r=n("0afd"),a=n.n(r);a.a},b9c0:function(e,t,n){"use strict";var r=n("0bf3"),a=n.n(r);a.a},be12:function(e,t,n){},d69a:function(e,t,n){}});
//# sourceMappingURL=app.0df5c97d.js.map